# ========================================
# GirlyCrea - Docker Compose Environment Variables Template
# ========================================
# Fichier de configuration pour docker-compose.staging.yml
# 
# Usage:
#   1. Copier ce fichier: cp env.docker.template .env.docker
#   2. Remplir toutes les valeurs (surtout les secrets)
#   3. Générer les secrets JWT (voir instructions ci-dessous)
#   4. Lancer: docker-compose -f docker-compose.staging.yml --env-file .env.docker up -d
#
# ⚠️  IMPORTANT: Ne jamais commiter .env.docker avec des valeurs réelles!
# ========================================

# ========================================
# DATABASE - PostgreSQL 15
# ========================================
# Utilisateur PostgreSQL
POSTGRES_USER=girlycrea_user

# Mot de passe PostgreSQL (change en production!)
POSTGRES_PASSWORD=local_dev_password

# Nom de la base de données
POSTGRES_DB=girlycrea

# URL de connexion (format: postgresql://user:password@host:port/db)
# En Docker: postgres = nom du service Docker
DATABASE_URL=postgresql://girlycrea_user:local_dev_password@postgres:5432/girlycrea

# ========================================
# CACHE - Redis 7
# ========================================
# URL Redis (format: redis://host:port ou redis://password@host:port)
# En Docker: redis = nom du service Docker
REDIS_URL=redis://redis:6379

# Host et port Redis (pour ioredis)
REDIS_HOST=redis
REDIS_PORT=6379

# Mot de passe Redis (optionnel, laisser vide si pas de mot de passe)
REDIS_PASSWORD=

# ========================================
# JWT SECRETS (Générer avec:)
# node -e "console.log(require('crypto').randomBytes(32).toString('hex'))"
# ========================================

# Secret pour signer les JWT access tokens (64 caractères minimum)
JWT_SECRET=your_jwt_secret_64_chars_min_replace_me_with_generated_value

# Secret pour signer les JWT refresh tokens (64 caractères minimum)
JWT_REFRESH_SECRET=your_refresh_secret_64_chars_min_replace_me_with_generated_value

# Durée de validité du JWT (en secondes, ex: 3600 = 1h)
JWT_EXPIRY=3600

# ========================================
# STRIPE - Paiements
# ========================================
# Clé secrète Stripe (commence par sk_test_ en dev)
STRIPE_SECRET_KEY=sk_test_your_secret_key_here

# Secret webhook Stripe (commence par whsec_)
STRIPE_WEBHOOK_SECRET=whsec_your_webhook_secret_here

# Clé publique Stripe (pour le frontend)
NEXT_PUBLIC_STRIPE_PUBLIC_KEY=pk_test_your_public_key_here

# ========================================
# EMAIL - Resend (ou Mailgun)
# ========================================
# Provider email (resend ou mailgun)
EMAIL_PROVIDER=resend

# Clé API Resend (https://resend.com)
RESEND_API_KEY=re_your_api_key_here

# OU si tu utilises Mailgun:
# MAILGUN_API_KEY=your_mailgun_key_here
# MAILGUN_DOMAIN=your_domain@mg.example.com

# Adresse email "from" pour les emails transactionnels
EMAIL_FROM=noreply@girlycrea.com

# ========================================
# FRONTEND - Next.js Configuration
# ========================================
# URL de l'API backend (accès depuis le frontend)
# En production locale Docker: http://localhost/api
# En production réelle: https://api.girlycrea.fr
NEXT_PUBLIC_API_URL=http://localhost/api

# Nom du site (affiché dans les metas)
NEXT_PUBLIC_SITE_NAME=GirlyCrea

# ========================================
# SUPABASE (Optionnel - si vous utilisez Supabase au lieu de PostgreSQL direct)
# ========================================
# Si vous utilisez PostgreSQL dans Docker, utiliser un placeholder
SUPABASE_URL=https://placeholder.supabase.co
SUPABASE_KEY=local-dev-key-not-needed

# Pour le frontend
NEXT_PUBLIC_SUPABASE_URL=
NEXT_PUBLIC_SUPABASE_KEY=

# ========================================
# NODE.js Configuration
# ========================================
# Environnement (development, staging, production)
NODE_ENV=production

# Port du backend
PORT=3001

# ========================================
# SECURITY - Sécurité
# ========================================
# En staging: true (désactiver CSRF pour faciliter les tests)
# En production: false (activer CSRF)
SKIP_CSRF_PROTECTION=false

# En staging: * (accepter toutes les origines)
# En production: https://girlycrea.fr,https://www.girlycrea.fr
CORS_ORIGINS=http://localhost:3000,http://localhost
CORS_ORIGIN=http://localhost

# ========================================
# ADMIN & REVALIDATION
# ========================================
# Token admin pour accès privilégié (générer avec crypto.randomBytes)
ADMIN_TOKEN=CHANGE_ME_ADMIN_TOKEN_MIN_32_CHARS

# Secret pour revalidation Next.js (générer avec crypto.randomBytes)
REVALIDATE_SECRET=CHANGE_ME_REVALIDATE_SECRET_MIN_32_CHARS

# ========================================
# LOGGING - Logs
# ========================================
# Niveau de log (error, warn, info, debug)
LOG_LEVEL=info

# ========================================
# OPTIONAL - Features Avancées
# ========================================
# Sentry pour error tracking (optionnel)
SENTRY_DSN=

# Analytics (optionnel)
ANALYTICS_TOKEN=

# Mode debug (affiche plus de logs)
DEBUG=false
